!function(){function t(e,i,o){function n(s,c){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!c&&h)return h(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){return n(e[s][1][t]||t)},l,l.exports,t,e,i,o)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}return t}()({1:[function(t,e,i){"use strict";function o(t){for(var e in t)"function"==typeof t[e]&&0===e.indexOf("_on")&&(t[e]=t[e].bind(t))}const n=t("mitt");var r=function(t,e){e=e||{},this._currentPixel=void 0,this._pixelSize=e.pixelSize||1,this._color=e.color||"black",this._canvasEl=t,this._pixels={},this._collection=[],this._ev=n(),o(this)};r.prototype._bres=function(t,e){var i,o=[],n=t.x<e.x,r=n?t.x:e.x,s=n?t.y:e.y,c=n?e.x:t.x,h=n?e.y:t.y,u=s<h?1:-1;if(r===c){for(i=s;i!==h+u;i+=u)o.push({x:r,y:i});return o}i=s;for(var l=0,p=Math.abs((h-s)/(c-r)),_=r<c?1:-1,a=r;a!==c+_;a+=_){o.push({x:a,y:i}),l+=p;for(var v=a,f=i;Math.abs(l)>.5&&i!==h;)v===a&&f===i||(o.push({x:a,y:i}),v=a,f=i),i+=u,l-=1}return o},r.prototype._clearCanvas=function(){var t=this._canvasEl;t.getContext("2d").clearRect(0,0,t.width,t.height)},r._copyPixels=function(t){var e={};for(var i in t){i=parseInt(""+i),e[i]={};for(var o in t[i])o=parseInt(""+o),e[i][o]=t[i][o]}return e},r.prototype._getCoordFromEvent=function(t){var e=this._canvasEl.getBoundingClientRect();return t=t.touches?t.touches[0]:t,{x:t.clientX-e.left,y:t.clientY-e.top}},r.prototype._getPixelFromEvent=function(t){var e=this._getCoordFromEvent(t);return{x:Math.floor(e.x/this._pixelSize),y:Math.floor(e.y/this._pixelSize)}},r.prototype._renderPixel=function(t){var e=this._pixels[t.x][t.y],i=this._canvasEl.getContext("2d");i.fillStyle=e,i.fillRect(this._pixelSize*t.x,this._pixelSize*t.y,this._pixelSize,this._pixelSize)},r.prototype._drawPixel=function(t){t.x*this._pixelSize>=this._canvasEl.width||t.y*this._pixelSize>=this._canvasEl.height||(this._pixels[t.x]||(this._pixels[t.x]={}),this._pixels[t.x][t.y]=this._color,this._renderPixel(t))},r.prototype._redraw=function(){this._clearCanvas();for(var t in this._pixels)for(var e in this._pixels[t])this._renderPixel({x:t,y:e})},r.prototype._onDown=function(t){this._active||(t.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("keydown",this._onKeyDown)),this._active=!1,this._currentPixel=this._getPixelFromEvent(t),this._drawPixel(this._currentPixel))},r.prototype._onKeyDown=function(t){27===t.keyCode&&(this._active=!1,this.clear())},r.prototype._onMove=function(t){this._active||(this._active=!0);var e=this._getPixelFromEvent(t),i=this._currentPixel;this._collection.push(e);for(var o=this._bres(e,i),n=0;n<o.length;n++)this._drawPixel(o[n]);this._currentPixel=e,t.preventDefault()},r.prototype._onTouchEnd=function(){this._onUp(),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd)},r.prototype._onMouseUp=function(){this._onUp(),document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("keydown",this._onKeyDown)},r.prototype._onUp=function(){this._active&&(this._active=!1,this.fire("result",{result:this.getCollection()}),this._collection=[])},r.prototype.loadPixels=function(t){this._pixels=r._copyPixels(t),this._redraw()},r.prototype.getPixels=function(){return r._copyPixels(this._pixels)},r.prototype.getCollection=function(){return this._collection},r.prototype.clear=function(){return this._clearCanvas(),this._pixels={},this},r.prototype.enable=function(){return this._canvasEl.addEventListener("mousedown",this._onDown),this._canvasEl.addEventListener("touchstart",this._onDown),this},r.prototype.disable=function(){return this._canvasEl.removeEventListener("mousedown",this._onDown),this._canvasEl.removeEventListener("touchstart",this._onDown),this},r.prototype.setColor=function(t){this._color=t},r.prototype.setPixelSize=function(t){this._pixelSize=t,this._redraw()},r.prototype.on=function(t,e){return this._ev.on(t,e),this},r.prototype.fire=function(t,e){return this._ev.emit(t,e),this},r.prototype.off=function(t,e){return this._ev.off(t,e),this},void 0!==e&&e.exports?e.exports=r:window.Pencil=r},{mitt:2}],2:[function(t,e,i){function o(t){return t=t||Object.create(null),{on:function(e,i){(t[e]||(t[e]=[])).push(i)},off:function(e,i){t[e]&&t[e].splice(t[e].indexOf(i)>>>0,1)},emit:function(e,i){(t[e]||[]).slice().map(function(t){t(i)}),(t["*"]||[]).slice().map(function(t){t(e,i)})}}}e.exports=o},{}]},{},[1]);
